# Хэш таблица

**Хеш-таблица(hash table)** —  это структура данных, реализующая интерфейс ассоциативного массива, а именно, она позволяет хранить пары `ключ => значение` и выполнять три операции:

-  добавление
- поиск 
- удаление

Главное свойство hash-таблиц — все операции(вставка, поиск и удаление) в среднем выполняются за **O(1)**, среднее время поиска по ней также равно **O(1)** и **O(n)** в худшем случае.

Выполнение операции в хеш-таблице начинается с вычисления [хеш-функции](https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F) от ключа. Получающееся хеш-значение  играет роль индекса. Затем выполняемая операция (добавление, удаление или поиск) перенаправляется объекту, который хранится в соответствующей ячейке массива . Ситуация, когда для различных ключей получается одно и то же хеш-значение, называется [коллизией](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BB%D0%BB%D0%B8%D0%B7%D0%B8%D1%8F_%D1%85%D0%B5%D1%88-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D0%B8). Существует несколько способов разрешения коллизий.

### Метод цепочек

Этот метод часто называют **открытым хешированием**. Его суть проста — элементы с одинаковым хешем попадают в одну ячейку в виде [связного списка](https://ru.wikipedia.org/wiki/%D0%A1%D0%B2%D1%8F%D0%B7%D0%BD%D1%8B%D0%B9_%D1%81%D0%BF%D0%B8%D1%81%D0%BE%D0%BA)(возможны оптимизации, где вместа списка будет дерево). Каждая ячейка массива *H* является указателем на связный список(цепочку) пар ключ-значение, соответствующих одному и тому же хеш-значению ключа. Коллизии просто приводят к тому, что появляются цепочки длиной более одного элемента.

![](..\media\algostruct\collision_chain.png)

### Открытая индексация (или закрытое хеширование)

В массиве *H* хранятся сами пары ключ-значение. Алгоритм вставки элемента проверяет ячейки массива *H* в некотором порядке (**последовательность проб**) до тех пор, пока не будет найдена первая свободная ячейка, в которую и будет записан новый элемент. 

В общем случае, она зависит только от ключа элемента, то есть это последовательность *h*0(*x*), *h*1(*x*), …, *h**n* — 1(*x*), где *x* — ключ элемента, а *h**i*(*x*) — произвольные функции, сопоставляющие каждому ключу ячейку в хеш-таблице. Первый элемент в последовательности, как правило, равен значению некоторой хеш-функции от ключа, а остальные считаются от него одним из приведённых ниже способов. Для успешной работы алгоритмов поиска последовательность проб должна быть такой, чтобы все ячейки хеш-таблицы оказались просмотренными ровно по одному разу.

Алгоритм поиска просматривает ячейки хеш-таблицы в том же самом порядке, что и при вставке, до тех пор, пока не найдется либо элемент с искомым ключом, либо свободная ячейка (что означает отсутствие элемента в хеш-таблице).Этот порядок вычисляется на лету, что позволяет сэкономить на памяти для указателей, требующихся в хеш-таблицах с цепочками.

![](..\media\algostruct\collision_open_hash.png)



*Дополнительно:*

- [Хэширование](http://aliev.me/runestone/SortSearch/Hashing.html)
- [Хэш-Таблица](https://www.wikiwand.com/ru/%D0%A5%D0%B5%D1%88-%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0)