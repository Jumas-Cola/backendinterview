# Deployment

## Green-Blue Deployment

При этой стратегии создается полная копия инфраструктуры (Green) для
новой версии приложения, а затем постепенно перенаправляется трафик на нее, оставляя предыдущую версию (Blue) работающей
параллельно. Это обеспечивает возможность быстрого отката в случае проблем и минимизирует риски простоя системы.

Одна из задач автоматизации деплоя — переход из одного состояния в другое внутри себя же, с переводом софта из финальной
стадии тестирования в действующий продакшен. Обычно это нужно сделать быстро, чтобы минимизировать время простоя. При
сине-зеленом подходе у вас есть два продакшена, насколько возможно идентичных. В любое время один из них, допустим
синий, активен. При подготовке новой версии софта, вы делаете финальное тестирование в зелёном продакшене. Вы
убеждаетесь, что программа в этом продакшене работает и настраиваете роутер так, чтобы все входящие запросы шли в
зелёную операционную среду — синяя в режиме ожидания.

Сине-зелёный деплой также даёт вам возможность быстро откатиться до старого состояния: если что-то пойдет не так,
переключите роутер обратно на синий продакшен. Но вам всё ещё придётся справляться с пропущенными транзакциями, пока
зелёный продакшен активен, и, в зависимости от структуры кода, вы сможете направлять транзакции в оба продакшена, чтобы
сохранять синий как резервную копию, при активном зелёном. Или можете перевести приложение в read-only режим, перед
синхронизацией, запустить его на время в этом режиме, а потом переключить в режим read-write. Этого может оказаться
достаточно, чтобы избавиться от многих нерешенных проблем.

